!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.VMasker=e()}(this,function(){var o=[8,9,16,17,18,36,37,38,39,40,46,91,92,93],S=function(t){return(t={delimiter:(t=t||{}).delimiter||".",lastOutput:t.lastOutput,precision:t.hasOwnProperty("precision")?t.precision:2,separator:t.separator||",",showSignal:t.showSignal,suffixUnit:t.suffixUnit&&" "+t.suffixUnit.replace(/[\s]/g,"")||"",unit:t.unit&&t.unit.replace(/[\s]/g,"")+" "||"",zeroCents:t.zeroCents}).moneyPrecision=t.zeroCents?0:t.precision,t},h=function(t,e,n){for(;e<t.length;e++)"9"!==t[e]&&"A"!==t[e]&&"S"!==t[e]||(t[e]=n);return t},n=function(t){this.elements=t};n.prototype.unbindElementToMask=function(){for(var t=0,e=this.elements.length;t<e;t++)this.elements[t].lastOutput="",this.elements[t].onkeyup=!1,this.elements[t].onkeydown=!1,this.elements[t].value.length&&(this.elements[t].value=this.elements[t].value.replace(/\D/g,""))},n.prototype.bindElementToMask=function(n){for(var i=this,t=function(t){var e=(t=t||window.event).target||t.srcElement;(function(t){for(var e=0,n=o.length;e<n;e++)if(t==o[e])return!1;return!0})(t.keyCode)&&setTimeout(function(){i.opts.lastOutput=e.lastOutput,e.value=s[n](e.value,i.opts),e.lastOutput=e.value,e.setSelectionRange&&i.opts.suffixUnit&&e.setSelectionRange(e.value.length,e.value.length-i.opts.suffixUnit.length)},0)},e=0,r=this.elements.length;e<r;e++)this.elements[e].lastOutput="",this.elements[e].onkeyup=t,this.elements[e].value.length&&(this.elements[e].value=s[n](this.elements[e].value,this.opts))},n.prototype.maskMoney=function(t){this.opts=S(t),this.bindElementToMask("toMoney")},n.prototype.maskNumber=function(){this.opts={},this.bindElementToMask("toNumber")},n.prototype.maskAlphaNum=function(){this.opts={},this.bindElementToMask("toAlphaNumeric")},n.prototype.maskPattern=function(t){this.opts={pattern:t},this.bindElementToMask("toPattern")},n.prototype.unMask=function(){this.unbindElementToMask()};var s=function(t){if(!t)throw new Error("VanillaMasker: There is no element to bind.");var e="length"in t?t.length?t:[]:[t];return new n(e)};return s.toMoney=function(t,e){if((e=S(e)).zeroCents){e.lastOutput=e.lastOutput||"";var n="("+e.separator+"[0]{0,"+e.precision+"})",i=new RegExp(n,"g"),r=t.toString().replace(/[\D]/g,"").length||0,o=e.lastOutput.toString().replace(/[\D]/g,"").length||0;t=t.toString().replace(i,""),r<o&&(t=t.slice(0,t.length-1))}var s=t.toString(),l=s.indexOf(e.separator),a=e.precision-(s.length-l-1);-1!==l&&0<a&&(s+="0"*a),s=s.replace(/[\D]/g,"");for(var u=new RegExp("^(0|\\"+e.delimiter+")"),p=new RegExp("(\\"+e.separator+")$"),h=s.substr(0,s.length-e.moneyPrecision),c=h.substr(0,h.length%3),f=new Array(e.precision+1).join("0"),g=0,m=(h=h.substr(h.length%3,h.length)).length;g<m;g++)g%3==0&&(c+=e.delimiter),c+=h[g];c=(c=c.replace(u,"")).length?c:"0";var v="";if(!0===e.showSignal&&(v=t<0||t.startsWith&&t.startsWith("-")?"-":""),!e.zeroCents){var d=Math.max(0,s.length-e.precision),y=s.substr(d,e.precision),b=y.length,k=e.precision>b?e.precision:b;f=(f+y).slice(-k)}return(e.unit+v+c+e.separator+f).replace(p,"")+e.suffixUnit},s.toPattern=function(t,e){var n,i="object"==typeof e?e.pattern:e,r=i.replace(/\W/g,""),o=i.split(""),s=t.toString().replace(/\W/g,""),l=s.replace(/\W/g,""),a=0,u=o.length,p="object"==typeof e?e.placeholder:void 0;for(n=0;n<u;n++){if(a>=s.length){if(r.length==l.length)return o.join("");if(void 0!==p&&r.length>l.length)return h(o,n,p).join("");break}if("9"===o[n]&&s[a].match(/[0-9]/)||"A"===o[n]&&s[a].match(/[a-zA-Z]/)||"S"===o[n]&&s[a].match(/[0-9a-zA-Z]/))o[n]=s[a++];else{if("9"===o[n]||"A"===o[n]||"S"===o[n])return void 0!==p?h(o,n,p).join(""):o.slice(0,n).join("");o[n]===s[a]&&a++}}return o.join("").substr(0,n)},s.toNumber=function(t){return t.toString().replace(/(?!^-)[^0-9]/g,"")},s.toAlphaNumeric=function(t){return t.toString().replace(/[^a-z0-9 ]+/i,"")},s});