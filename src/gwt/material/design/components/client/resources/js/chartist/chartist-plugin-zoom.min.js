!function(n,e){"function"==typeof define&&define.amd?define(["chartist"],function(t){return n.returnExportsGlobal=e(t)}):"object"==typeof exports?module.exports=e(require("chartist")):n["Chartist.plugins.zoom"]=e(Chartist)}(this,function(t){return function(t,n,k){"use strict";var e={pointClipOffset:5};function T(t){t.attr({style:"display:none"})}function C(t){t.attr({style:"display:block"})}function z(t,n){var e=t.x,i=t.y,o=n.x-e,r=n.y-i;return o<0&&(o=-o,e=n.x),r<0&&(r=-r,i=n.y),{x:e,y:i,width:o,height:r}}function D(t,n){return e=t.clientX,i=t.clientY,r="svg"===(o=n).tagName?o:o.ownerSVGElement,a=r.getScreenCTM(),(u=r.createSVGPoint()).x=e,u.y=i,(u=u.matrixTransform(a.inverse()))||{x:0,y:0};var e,i,o,r,a,u}function S(t,n){if(!n.bounds)return 0;var e,i,o=n.bounds.max,r=n.bounds.min;if(n.scale&&"log"===n.scale.type){var a=n.scale.base;return Math.pow(a,t*(e=o/r,i=a,Math.log(e)/Math.log(i))/n.axisLength)*r}return t*n.bounds.range/n.axisLength+r}k.plugins=k.plugins||{},k.plugins.zoom=function(L){return L=k.extend({},e,L),function(r){if(r instanceof k.Line){var a,u,h,c,s,e,l=L.onZoom,o=[];r.on("draw",function(t){var n=t.type,e="point"===n?"point-mask":"line-mask";"line"!==n&&"bar"!==n&&"area"!==n&&"point"!==n||t.element.attr({"clip-path":"url(#"+e+")"})}),r.on("created",function(t){h=t.axisX,c=t.axisY,s=t.chartRect,u=t.svg._node,T(a=t.svg.elem("rect",{x:10,y:10,width:100,height:100},"ct-zoom-rect"));var e=t.svg.querySelector("defs")||t.svg.elem("defs"),i=s.width(),o=s.height();function n(t,n){e.elem("clipPath",{id:t}).elem("rect",{x:s.x1-n,y:s.y2-n,width:i+n+n,height:o+n+n,fill:"white"})}function r(t,n){u.addEventListener(t,n)}n("line-mask",0),n("point-mask",L.pointClipOffset),r("mousedown",y),r("mouseup",w),r("mousemove",M),r("touchstart",p),r("touchmove",m),r("touchend",x),r("touchcancel",v),r("dblclick",f)});var f=function(){r.options.axisX.highLow=null,r.options.axisY.highLow=null,r.update(r.data,r.options)}}function d(t){var n=D(t,u);return n.id=t.identifier,n}function g(t){for(var n=0;n<o.length;n++){if(o[n].id===t)return n}return-1}function p(t){for(var n=t.changedTouches,e=0;e<n.length;e++)o.push(d(n[e]));1<o.length&&(a.attr(z(o[0],o[1])),C(a))}function m(t){for(var n=t.changedTouches,e=0;e<n.length;e++){var i=g(n[e].identifier);o.splice(i,1,d(n[e]))}1<o.length&&(a.attr(z(o[0],o[1])),C(a),t.preventDefault())}function v(t){n(t.changedTouches)}function n(t){for(var n=0;n<t.length;n++){var e=g(t[n].identifier);0<=e&&o.splice(e,1)}}function x(t){1<o.length&&b(z(o[0],o[1])),n(t.changedTouches),T(a)}function y(t){if(0===t.button){var n=D(t,u);i(n,s)&&(e=n,a.attr(z(e,e)),C(a),t.preventDefault())}}function i(t,n){return t.x>=n.x1&&t.x<=n.x2&&t.y>=n.y2&&t.y<=n.y1}function w(t){0===t.button&&e?(b(z(e,D(t,u))),e=null,T(a)):L.resetOnRightMouseBtn&&2===t.button&&(f(),t.preventDefault())}function b(t){if(5<t.width&&5<t.height){var n=Math.max(0,t.x-s.x1),e=Math.min(s.width(),n+t.width),i=Math.min(s.height(),s.y1-t.y),o=Math.max(0,i-t.height);r.options.axisX.highLow={low:S(n,h),high:S(e,h)},r.options.axisY.highLow={low:S(o,c),high:S(i,c)},r.update(r.data,r.options),l&&l(r,f)}}function M(t){if(e){var n=D(t,u);i(n,s)&&(a.attr(z(e,n)),t.preventDefault())}}}}}(window,document,t),t.plugins.zoom});